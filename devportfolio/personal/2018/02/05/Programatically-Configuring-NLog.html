<p>Over the past few weeks I have been looking into various logging methodologies. After a vast analysis of the plethera of logging practices avaialble I can only conclude that although everyone seems to have an idea as to what is needed, noone appears to be able to identify a standard approach to logging.</p>

<p>So I have looked into a few possible solutions for some of the projects that I have been working on over the past few month which include the following based on industry popularity in the .Net world:</p>
<ul>
  <li>log4Net</li>
  <li>NLog</li>
  <li>Microsoft.Extensions.Logging</li>
</ul>

<p>When selecting a solution, the following criteria was needed:</p>
<ul>
  <li>A Common Framework that is not likely to be unsupported in the next few years</li>
  <li>A means to configure the logging components outside of configuration files.</li>
  <li>Ease of Use</li>
</ul>

<p>I reviewed each option based on the criteria and came to the conclusion to use the NLog framework for my application logging needs at this time.</p>

<p>Bel ow is and exampl of how the NLog framework can be configured Programmatically.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	  <span class="k">protected</span> <span class="k">void</span> <span class="nf">sortDropDownList</span><span class="p">(</span><span class="n">DropDownList</span> <span class="n">ddl</span><span class="p">,</span> <span class="kt">string</span> <span class="k">orderby</span><span class="p">,</span> <span class="kt">string</span> <span class="n">defaultSelectionText</span><span class="p">)</span> 
    <span class="p">{</span>
 
       <span class="k">const</span> <span class="kt">string</span> <span class="n">FILE_FORMAT_KEY</span> <span class="p">=</span> <span class="s">@"${date:format=HH\:mm\:ss}|
    [${pad:padding=-5:inner=${level:uppercase=true}}]|${message}|
    ${ exception}|${callsite}|${stacktrace}|${callsite-linenumber}"</span><span class="p">;</span>
       <span class="c1">// Step 1. Create configuration object </span>
       <span class="n">LoggingConfiguration</span> <span class="n">config</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">LoggingConfiguration</span><span class="p">();</span>
 
       <span class="c1">// Step 2. Create targets and add them to the configuration </span>
       <span class="n">ColoredConsoleTarget</span> <span class="n">consoleTarget</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">ColoredConsoleTarget</span><span class="p">();</span>
       <span class="n">config</span><span class="p">.</span><span class="nf">AddTarget</span><span class="p">(</span><span class="s">"console"</span><span class="p">,</span> <span class="n">consoleTarget</span><span class="p">);</span>
 
       <span class="n">FileTarget</span> <span class="n">fileTarget</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">FileTarget</span><span class="p">();</span>
       <span class="n">config</span><span class="p">.</span><span class="nf">AddTarget</span><span class="p">(</span><span class="s">"file"</span><span class="p">,</span> <span class="n">fileTarget</span><span class="p">);</span>
 
       <span class="n">DatabaseTarget</span> <span class="n">databaseTarget</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">DatabaseTarget</span><span class="p">();</span>
       <span class="n">config</span><span class="p">.</span><span class="nf">AddTarget</span><span class="p">(</span><span class="s">"database"</span><span class="p">,</span> <span class="n">databaseTarget</span><span class="p">);</span>
 
       <span class="c1">// Step 3. Set target properties </span>
       <span class="n">consoleTarget</span><span class="p">.</span><span class="n">Layout</span> <span class="p">=</span> <span class="n">FILE_FORMAT_KEY</span><span class="p">;</span>
       <span class="n">consoleTarget</span><span class="p">.</span><span class="n">DetectConsoleAvailable</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
 
       <span class="n">fileTarget</span><span class="p">.</span><span class="n">FileName</span> <span class="p">=</span> <span class="s">"${basedir}/Logs/${cached:${date:yyyy-MM-dd}}.log"</span><span class="p">;</span>
       <span class="n">fileTarget</span><span class="p">.</span><span class="n">Layout</span> <span class="p">=</span> <span class="n">FILE_FORMAT_KEY</span><span class="p">;</span>
       <span class="n">fileTarget</span><span class="p">.</span><span class="n">ArchiveFileName</span> <span class="p">=</span> <span class="s">"${basedir}/Logs/Archive/${date:format=yyyy-MM-dd}.log"</span><span class="p">;</span>
       <span class="n">fileTarget</span><span class="p">.</span><span class="n">ArchiveDateFormat</span> <span class="p">=</span> <span class="s">"yyyy-MM-dd"</span><span class="p">;</span>
       <span class="n">fileTarget</span><span class="p">.</span><span class="n">ArchiveNumbering</span> <span class="p">=</span> <span class="n">ArchiveNumberingMode</span><span class="p">.</span><span class="n">Date</span><span class="p">;</span>
       <span class="n">fileTarget</span><span class="p">.</span><span class="n">ArchiveEvery</span> <span class="p">=</span> <span class="n">FileArchivePeriod</span><span class="p">.</span><span class="n">Day</span><span class="p">;</span>
       <span class="n">fileTarget</span><span class="p">.</span><span class="n">MaxArchiveFiles</span> <span class="p">=</span> <span class="m">30</span><span class="p">;</span>
 
       <span class="c1">//databaseTarget.ConnectionString = @""</span>
       <span class="c1">//databaseTarget.ConnectionStringName = "NLog";</span>
       <span class="c1">//databaseTarget.DBProvider = "System.Data.SqlClient";</span>
       <span class="c1">//databaseTarget.CommandText = @"insert into dbo.NLog (</span>
       <span class="c1">//                               Application, Logged, Level, Username, Message,Logger, Properties, CallSite, Exception</span>
       <span class="c1">//                             ) values(</span>
       <span class="c1">//                               @application, @logged, @level, @username, @message,@logger, @properties @callsite, @exception</span>
       <span class="c1">//                             ); ";</span>
 
 
       <span class="c1">//databaseTarget.Parameters.Add(</span>
       <span class="k">new</span> <span class="nf">DatabaseParameterInfo</span><span class="p">(</span><span class="s">"@application"</span><span class="p">,</span> <span class="s">@"${ appsetting:name = AppName:default = Unknown\: set AppName in appSettings }"</span><span class="p">));</span>
       <span class="c1">//databaseTarget.Parameters.Add(</span>
       <span class="k">new</span> <span class="nf">DatabaseParameterInfo</span><span class="p">(</span><span class="s">"@logged"</span><span class="p">,</span> <span class="s">"${date}"</span><span class="p">));</span>
       <span class="c1">//databaseTarget.Parameters.Add(</span>
       <span class="k">new</span> <span class="nf">DatabaseParameterInfo</span><span class="p">(</span><span class="s">"@level"</span><span class="p">,</span> <span class="s">"${level}"</span><span class="p">));</span>
       <span class="c1">//databaseTarget.Parameters.Add(</span>
       <span class="k">new</span> <span class="nf">DatabaseParameterInfo</span><span class="p">(</span><span class="s">"@message"</span><span class="p">,</span> <span class="s">"${message}"</span><span class="p">));</span>
       <span class="c1">//databaseTarget.Parameters.Add(</span>
       <span class="k">new</span> <span class="nf">DatabaseParameterInfo</span><span class="p">(</span><span class="s">"@username"</span><span class="p">,</span> <span class="s">"${identity}"</span><span class="p">));</span>
       <span class="c1">//databaseTarget.Parameters.Add(</span>
       <span class="k">new</span> <span class="nf">DatabaseParameterInfo</span><span class="p">(</span><span class="s">"@logger"</span><span class="p">,</span> <span class="s">"${logger}"</span><span class="p">));</span>
       <span class="c1">//databaseTarget.Parameters.Add(</span>
       <span class="k">new</span> <span class="nf">DatabaseParameterInfo</span><span class="p">(</span><span class="s">"@properties"</span><span class="p">,</span> <span class="s">"${all-event-properties:separator=|}"</span><span class="p">));</span>
       <span class="c1">//databaseTarget.Parameters.Add(</span>
       <span class="k">new</span> <span class="nf">DatabaseParameterInfo</span><span class="p">(</span><span class="s">"@callsite"</span><span class="p">,</span> <span class="s">"@{callsite}"</span><span class="p">));</span>
       <span class="c1">//databaseTarget.Parameters.Add(</span>
       <span class="k">new</span> <span class="nf">DatabaseParameterInfo</span><span class="p">(</span><span class="s">"@exception"</span><span class="p">,</span> <span class="s">"${exception:tostring}"</span><span class="p">));</span>
 
       <span class="c1">// Step 4. Define rules</span>
       <span class="n">LoggingRule</span> <span class="n">colorConsoleRule</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">LoggingRule</span><span class="p">(</span><span class="s">"*"</span><span class="p">,</span> <span class="n">LogLevel</span><span class="p">.</span><span class="n">Debug</span><span class="p">,</span> <span class="n">consoleTarget</span><span class="p">);</span>
       <span class="n">config</span><span class="p">.</span><span class="n">LoggingRules</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">colorConsoleRule</span><span class="p">);</span>
 
       <span class="n">LoggingRule</span> <span class="n">fileRule</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">LoggingRule</span><span class="p">(</span><span class="s">"*"</span><span class="p">,</span> <span class="n">LogLevel</span><span class="p">.</span><span class="n">Warn</span><span class="p">,</span> <span class="n">fileTarget</span><span class="p">);</span>
       <span class="n">config</span><span class="p">.</span><span class="n">LoggingRules</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">fileRule</span><span class="p">);</span>
 
       <span class="n">LoggingRule</span> <span class="n">databaseRule</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">LoggingRule</span><span class="p">(</span><span class="s">"*"</span><span class="p">,</span> <span class="n">LogLevel</span><span class="p">.</span><span class="n">Trace</span><span class="p">,</span> <span class="n">databaseTarget</span><span class="p">);</span>
       <span class="n">config</span><span class="p">.</span><span class="n">LoggingRules</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">databaseRule</span><span class="p">);</span>
       <span class="c1">// Step 5. Activate the configuration</span>
       <span class="n">LogManager</span><span class="p">.</span><span class="n">Configuration</span> <span class="p">=</span> <span class="n">config</span><span class="p">;</span>
 
       <span class="c1">// Example usage</span>
       <span class="n">logger</span><span class="p">.</span><span class="nf">Trace</span><span class="p">(</span><span class="s">"trace log message"</span><span class="p">);</span>
       <span class="n">logger</span><span class="p">.</span><span class="nf">Debug</span><span class="p">(</span><span class="s">"debug log message"</span><span class="p">);</span>
       <span class="n">logger</span><span class="p">.</span><span class="nf">Info</span><span class="p">(</span><span class="s">"info log message"</span><span class="p">);</span>
       <span class="n">logger</span><span class="p">.</span><span class="nf">Warn</span><span class="p">(</span><span class="s">"warn log message"</span><span class="p">);</span>
       <span class="n">logger</span><span class="p">.</span><span class="nf">Error</span><span class="p">(</span><span class="s">"error log message"</span><span class="p">);</span>
       <span class="n">logger</span><span class="p">.</span><span class="nf">Fatal</span><span class="p">(</span><span class="s">"fatal log message"</span><span class="p">);</span>
 
    <span class="p">}</span>
</code></pre></div></div>


trigger:
- gh-pages

pool:
  vmImage: ubuntu-latest

steps:
- checkout: self
  persistCredentials: true

#- script: |
#    git config --global user.email "adambaker@live.com"
#    git config --global user.name "Adam Baker" 
#  displayName: 'set git user info'

- script: |
   git config --global user.email adambaker@live.com & git config --global user.name "Adam Baker"
  workingDirectory: $(System.DefaultWorkingDirectory)

- script: |
   git checkout -b gh-pages
  displayName: check out gh-pages
  workingDirectory: $(System.DefaultWorkingDirectory)

- task: DownloadBuildArtifacts@1
  inputs:
    buildType: 'specific'
    project: '44ddd2e1-c1d5-4817-9d63-fd204e03eaa9'
    pipeline: '3'
    specificBuildWithTriggering: true
    buildVersionToDownload: 'latest'
    downloadType: 'single'
    artifactName: 'site'
    downloadPath: '$(Build.DefaultWorkingDirectory)'
    cleanDestinationFolder: true

- script: |
   git commit -m "deployment $(Build.BuildNumber)"
   git push --set-upstream origin gh-pages 
  displayName: commit to branch
  workingDirectory: $(System.DefaultWorkingDirectory)
#- script: 'git add .'
#  displayName: 'git add all files'
#
#- script : 'git commit -m "azure deploy"'
#  displayName: 'git commit with message'
#
#- script: 'git push'
#  displayName: 'git push to branch'